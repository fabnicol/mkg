\hypertarget{mkgentoo_8sh}{}\doxysection{mkgentoo.\+sh File Reference}
\label{mkgentoo_8sh}\index{mkgentoo.sh@{mkgentoo.sh}}


Process options, create Gentoo Virtual\+Box machine and optionally create clonezilla install medium.  


\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__create_installer_ga3cd1eb7159583a231db413e892df7f01}{help\+\_\+md}} ()
\begin{DoxyCompactList}\small\item\em Print usage in markdown format. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga34f49d33f396400becb2b774e0e35c61}{help\+\_\+}} ()
\begin{DoxyCompactList}\small\item\em Print usage to stdout. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_gad5b7496783f8df9ed740ac18f294a9f8}{manpage}} ()
\begin{DoxyCompactList}\small\item\em Print help to man page. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga70c71c5dfdef17318756391741c2abb7}{htmlpage}} ()
\begin{DoxyCompactList}\small\item\em Print help to html page. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga47e912030b40c7567600ab02dc8b8a67}{pdfpage}} ()
\begin{DoxyCompactList}\small\item\em Print help to pdf page. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga70ccc3a81e02612a86b3a3983bc1c586}{validate\+\_\+option}} (option)
\begin{DoxyCompactList}\small\item\em Check if argument is part of array \mbox{\hyperlink{group__create_installer_ga2b36d9209dbee6df3e60d878f3e51005}{A\+RR}} as a legitimate commandline option. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_gadf12a13e0b8f4032d46e50ccd6e0914e}{get\+\_\+options}} ()
\begin{DoxyCompactList}\small\item\em Parse command line. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga738e6a30beb886e891dbe9a6befc4d4a}{test\+\_\+cli\+\_\+pre}} ()
\begin{DoxyCompactList}\small\item\em Check Virtual\+Box version and prepare commandline analysis. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_gaff896e7d0252924e2224ab0cde968609}{test\+\_\+cli}} (cli)
\begin{DoxyCompactList}\small\item\em Analyse commandline. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga9fb02a8000daf0612335a0b6e5f1e815}{test\+\_\+cli\+\_\+post}} ()
\begin{DoxyCompactList}\small\item\em Check commanline coherence and incompatibilities. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_gad29a75dbf76ffa08bf28bf4254f234c7}{mount\+\_\+live\+\_\+cd}} ()
\begin{DoxyCompactList}\small\item\em Mount Gentoo/\+Clonezilla live CD and unsquashfs the G\+N\+U/linux system. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_gac524b24b0add02df542887f9b251eb42}{make\+\_\+boot\+\_\+from\+\_\+livecd}} ()
\begin{DoxyCompactList}\small\item\em Tweak the Gentoo minimal install CD so that the custom-\/ made shell scripts and stage3 archive are included into the squashfs filesystem. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga321673d67e2987c793505f7f323894a9}{test\+\_\+vm\+\_\+running}} (vm)
\begin{DoxyCompactList}\small\item\em Check if VM as first named argument exists and is running. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_gac4a43805e885f0c9dc375480c430ec7d}{deep\+\_\+clean}} ()
\begin{DoxyCompactList}\small\item\em Force-\/clean root Virtual\+Box registry. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga8e416fab9a9e0ffd0b87927d0ec94a25}{delete\+\_\+vm}} (vm, ext)
\begin{DoxyCompactList}\small\item\em Powers off, possibly with emergency stop, the VM names as first argument. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga629c1830d8dbae377193387edd199399}{create\+\_\+vm}} ()
\begin{DoxyCompactList}\small\item\em Create main Virtual\+Box machine using V\+Box\+Manage commandline. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_gab287091d1b1d633e450f830ad82511a0}{log\+\_\+loop}} ()
\begin{DoxyCompactList}\small\item\em Loop log tags every minute and optionally plot virtual disk size. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_gaf1997aed978fc339deb4a971444274a2}{create\+\_\+iso\+\_\+vm}} ()
\begin{DoxyCompactList}\small\item\em Create the new Virtual\+Box machine aimed at converting the V\+DI virtualdisk containing the Gentoo Linux distribution into an X\+Z-\/compressed clonezilla image uneder {\bfseries{I\+S\+O\+F\+I\+L\+E\+S/home/partimag/image}}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga3e1a1697e4de8257c9eac49d207b6826}{clone\+\_\+vm\+\_\+to\+\_\+device}} (mode)
\begin{DoxyCompactList}\small\item\em Directly clone Gentoo VM to U\+SB stick (or any using block device) \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_gaa20a26022083ddbb29df1a6ea3791e0e}{clone\+\_\+vm\+\_\+to\+\_\+raw}} ()
\begin{DoxyCompactList}\small\item\em Use. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga86464f142e32909fb7bd94e35fd2d171}{dd\+\_\+to\+\_\+usb}} ()
\begin{DoxyCompactList}\small\item\em Bare-\/metal copy of temporary R\+AW disk to external device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga1eee61abdc54f97375ce8ccb16e1e6aa}{vbox\+\_\+img\+\_\+works}} ()
\begin{DoxyCompactList}\small\item\em Test if {\bfseries{vbox-\/img}} is functional. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga9c894430bd3cf9eb3088505d042ae1f4}{create\+\_\+device\+\_\+system}} (Mode)
\begin{DoxyCompactList}\small\item\em Clone V\+DI virtual disk to external device (U\+SB device or hard drive) \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga4a96ee0336af9e52512585ceec9ca3a4}{generate\+\_\+\+Gentoo}} ()
\begin{DoxyCompactList}\small\item\em Launch routines\+: fetch install IO, starge3 archive, create VM. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga9cdb7f95380fd3520d58d31a1cd12f0d}{clonezilla\+\_\+to\+\_\+iso}} (iso, dir)
\begin{DoxyCompactList}\small\item\em Create Gentoo linux clonezilla I\+SO installer out of a clonezilla directory structure and an clonezilla image. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_gadc22bf7533f87e3218aba2acbf75e4c0}{add\+\_\+guest\+\_\+additions\+\_\+to\+\_\+clonezilla\+\_\+iso}} ()
\begin{DoxyCompactList}\small\item\em Download clonezilla I\+SO or recover it from cache calling \mbox{\hyperlink{fetch__functions_8sh_a996431f89efbe6441611e593254e487f}{fetch\+\_\+process\+\_\+clonezilla\+\_\+iso}}. ~\newline
Upgrade it with virtualbox guest additions. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga31786ef47f514c713cfeb361f37b7ab7}{bind\+\_\+mount\+\_\+clonezilla\+\_\+iso}} ()
\begin{DoxyCompactList}\small\item\em Fetches the clonezilla I\+SO. mount it to mnt, rsync it to mnt2 and I\+S\+O\+F\+I\+L\+ES bind-\/mount mnt2 live filesystem after unsquashfs. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga692cf2f94dddfbc83f4f0b0dd08526f3}{unmount\+\_\+clonezilla\+\_\+iso}} ()
\begin{DoxyCompactList}\small\item\em Unmount the clonezilla filesystem after exiting chroot. Restore the squashfs filesystem. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_gaf8725880181e1189e31629b07163aaa4}{clonezilla\+\_\+device\+\_\+to\+\_\+image}} ()
\begin{DoxyCompactList}\small\item\em Create Clone\+Zilla xz-\/compressed image out of an external block device (like a U\+SB stick) \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__create_installer_ga154b7fbdd178f7eea9a45c20e67a58d5}{prepare\+\_\+for\+\_\+iso\+\_\+vm}} ()
\item 
\mbox{\hyperlink{group__create_installer_ga51af30a60f9f02777c6396b8247e356f}{main}} ()
\begin{DoxyCompactList}\small\item\em Main function launching routines. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
Exported String \mbox{\hyperlink{group__create_installer_ga86cf981e617fa62d9780236ea2756256}{I\+SO}} = \char`\"{}downloaded.\+iso\char`\"{}
\begin{DoxyCompactList}\small\item\em Name of downloaded clonezilla I\+SO file. \end{DoxyCompactList}\item 
Exported String \mbox{\hyperlink{group__create_installer_ga7e7a3b0c3b3b454c1546882093442181}{C\+R\+E\+A\+T\+E\+\_\+\+I\+SO}} = false
\begin{DoxyCompactList}\small\item\em Custom name of I\+SO output. Default value is false Can be reversed by a name of type filename.\+iso on command line, previously created and reused to burn or dd to device installer. \end{DoxyCompactList}\item 
Exported String \mbox{\hyperlink{mkgentoo_8sh_a99fb68646489d046faa1a0478d7c8e76}{L\+OG}}
\item 
Exported String \mbox{\hyperlink{mkgentoo_8sh_a93f04e4165d1e26b707af12275800ef3}{I\+S\+O\+L\+I\+N\+U\+X\+\_\+\+D\+IR}} = isolinux
\item 
Exported String \mbox{\hyperlink{mkgentoo_8sh_ad1451b50408769582d8f5bd4254fe7b1}{P\+A\+TH}} = \char`\"{}\$\{P\+A\+TH\}\char`\"{}\+:\char`\"{}\$\{V\+B\+P\+A\+TH\}\char`\"{}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Process options, create Gentoo Virtual\+Box machine and optionally create clonezilla install medium. 

\begin{DoxyAuthor}{Author}
Fabrice Nicol \href{mailto:fabrnicol@gmail.com}{\texttt{ fabrnicol@gmail.\+com}} 
\end{DoxyAuthor}
\begin{DoxyCopyright}{Copyright}
G\+PL v.\+3 
\end{DoxyCopyright}
\begin{DoxyNote}{Note}
This file is not included into the clonezilla I\+SO live\+CD. 
\end{DoxyNote}
\begin{DoxyParagraph}{U\+S\+A\+GE}

\begin{DoxyCode}{0}
\DoxyCodeLine{mkg  [[\textcolor{keywordflow}{switch}=argument]...]  filename.iso  [1]}
\DoxyCodeLine{mkg  [[\textcolor{keywordflow}{switch}=argument]...]                [2]}
\DoxyCodeLine{mkg  help[=md]                             [3]}
\end{DoxyCode}
 
\end{DoxyParagraph}
\begin{DoxyParagraph}{}
Usage \mbox{[}1\mbox{]} creates a bootable I\+SO output file with a current Gentoo distribution. ~\newline
Usage \mbox{[}2\mbox{]} creates a Virtual\+Box V\+DI dynamic disk and a virtual machine with name Gentoo. ~\newline
Usage \mbox{[}3\mbox{]} prints this help, in markdown form if argument \textquotesingle{}md\textquotesingle{} is specified. ~\newline

\end{DoxyParagraph}
\begin{DoxyParagraph}{}
Run\+:
\begin{DoxyCode}{0}
\DoxyCodeLine{mkg help }
\end{DoxyCode}
 to print a list of possible switches and arguments. 
\end{DoxyParagraph}
\begin{DoxyWarning}{Warning}
you should have at least 55 GB of free disk space in the current directory or in vmpath if specified. Boolean values are either \textquotesingle{}true\textquotesingle{} or \textquotesingle{}false\textquotesingle{}. An option no followed by \textquotesingle{}=\textquotesingle{} is equivalent to {\bfseries{option=true}}, except for help and a possible I\+SO file. For example, to build a minimal\+: distribution,specify {\ttfamily minimal} or {\ttfamily  minimal=true} on command line. 
\end{DoxyWarning}
\begin{DoxyParagraph}{{\bfseries{Examples}}\+:}
\begin{DoxyItemize}
\item Only create the VM and virtual disk, in debug mode, without R and set new passwords, for a French-\/language platform. Use 8 cores. 
\begin{DoxyCode}{0}
\DoxyCodeLine{ mkg language=fr minimal debug\_mode ncpus=8}
\DoxyCodeLine{nonroot\_user=ken passwd=\textcolor{stringliteral}{'util!Hx\&32F'} rootpasswd=\textcolor{stringliteral}{'Hk\_32!\_CD'} \mbox{\hyperlink{group__auxiliary_functions_gaff07c1d29d6d6a540c726948254a1764}{cleanup}}=\textcolor{keyword}{false}}
\end{DoxyCode}
 \item Create I\+SO clonezilla image of Gentoo linux, burn it to D\+VD, create an installed OS on a U\+SB stick whose model label starts with {\itshape P\+NY} and finally create a clonezilla installer on another U\+SB stick mounted under {\ttfamily  /media/ken/\+A\+A45E } 
\begin{DoxyCode}{0}
\DoxyCodeLine{ mkgento burn hot\_install ext\_device=\textcolor{stringliteral}{"PNY"} device\_installer}
\DoxyCodeLine{ext\_device=\textcolor{stringliteral}{"Sams"} my\_gentoo\_image.iso}
\end{DoxyCode}
 \end{DoxyItemize}

\end{DoxyParagraph}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{mkgentoo_8sh_a93f04e4165d1e26b707af12275800ef3}\label{mkgentoo_8sh_a93f04e4165d1e26b707af12275800ef3}} 
\index{mkgentoo.sh@{mkgentoo.sh}!ISOLINUX\_DIR@{ISOLINUX\_DIR}}
\index{ISOLINUX\_DIR@{ISOLINUX\_DIR}!mkgentoo.sh@{mkgentoo.sh}}
\doxysubsubsection{\texorpdfstring{ISOLINUX\_DIR}{ISOLINUX\_DIR}}
{\footnotesize\ttfamily Exported String I\+S\+O\+L\+I\+N\+U\+X\+\_\+\+D\+IR = isolinux}



Definition at line 802 of file mkgentoo.\+sh.

\mbox{\Hypertarget{mkgentoo_8sh_a99fb68646489d046faa1a0478d7c8e76}\label{mkgentoo_8sh_a99fb68646489d046faa1a0478d7c8e76}} 
\index{mkgentoo.sh@{mkgentoo.sh}!LOG@{LOG}}
\index{LOG@{LOG}!mkgentoo.sh@{mkgentoo.sh}}
\doxysubsubsection{\texorpdfstring{LOG}{LOG}}
{\footnotesize\ttfamily Exported String L\+OG}



Definition at line 275 of file mkgentoo.\+sh.

\mbox{\Hypertarget{mkgentoo_8sh_ad1451b50408769582d8f5bd4254fe7b1}\label{mkgentoo_8sh_ad1451b50408769582d8f5bd4254fe7b1}} 
\index{mkgentoo.sh@{mkgentoo.sh}!PATH@{PATH}}
\index{PATH@{PATH}!mkgentoo.sh@{mkgentoo.sh}}
\doxysubsubsection{\texorpdfstring{PATH}{PATH}}
{\footnotesize\ttfamily Exported String P\+A\+TH = \char`\"{}\$\{P\+A\+TH\}\char`\"{}\+:\char`\"{}\$\{V\+B\+P\+A\+TH\}\char`\"{}}



Definition at line 1158 of file mkgentoo.\+sh.

